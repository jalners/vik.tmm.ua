var app={};!function(e,t){function r(){var r=this;r.radioCost=ko.observable("retail"),r.radioMetal=ko.observable("0,55"),r.radioProfile=ko.observable("S20"),r.costFlange=ko.computed(function(){var e=r.radioProfile();return"S20"===e?{costProfile:6,costCorner:1}:"S30"===e?{costProfile:8.5,costCorner:3}:{costProfile:0,costCorner:0}}),r.costPerSquareMeter=ko.computed(function(){var e=r.radioMetal(),t=r.radioCost();switch(e){case"0,55":return"retail"===t?{duct:95,shaped:113.5}:{duct:90.5,shaped:108};case"0,7":return"retail"===t?{duct:112.5,shaped:133.5}:{duct:107,shaped:127};case"0,8":return"retail"===t?{duct:124.5,shaped:147.5}:{duct:118.5,shaped:140.5};case"1,0":return"retail"===t?{duct:149.5,shaped:177.5}:{duct:142.5,shaped:169}}}),r.blockRectangularDuct=ko.observableArray([new t.iCon.RectangularDuct(r)]),r.blockRoundDuct=ko.observableArray([new t.iCon.RoundDuct(r)]),r.blockRectangularBend=ko.observableArray([new t.iCon.RectangularBend(r)]),r.blockRoundBend=ko.observableArray([new t.iCon.RoundBend(r)]),r.blockRectangularTransition=ko.observableArray([new t.iCon.RectangularTransition(r)]),r.blockRoundTransition=ko.observableArray([new t.iCon.RoundTransition(r)]),r.blockRectangularToRoundTransition=ko.observableArray([new t.iCon.RectangularToRoundTransition(r)]),r.blockRectangularTee=ko.observableArray([new t.iCon.RectangularTee(r)]),r.blockRoundTee=ko.observableArray([new t.iCon.RoundTee(r)]),r.blockRectangularOffset=ko.observableArray([new t.iCon.RectangularOffset(r)]),r.formatValue=function(e){return e?(e=+e,e.toFixed(2).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")):""},r.addLine=function(e){var o="block"+e.productType;if(r[o]().length===r[o].indexOf(e)+1){var a=!0;for(var n in e)if(e.hasOwnProperty(n)){if("productType"===n||"area"===n||"cost"===n||"cnt"===n)continue;e[n]()||(a=!1)}a&&r[o].push(new t.iCon[e.productType](r))}},r.clearLine=function(e){for(var t in e)if(e.hasOwnProperty(t)){if("productType"===t||"area"===t||"cost"===t)continue;e[t]("")}},r.removeLine=function(e){var t="block"+e.productType;r[t]().length===r[t].indexOf(e)+1?r.clearLine(e):r[t].remove(e)},r.calculationSum=function(t,r){var o=0;return e.each(t,function(){var e=parseFloat("function"==typeof this[r]?this[r]():this[r]);o+=e?e:0}),0==o?"":"cnt"===r?o:o.toFixed(4)},r.subtotalSum=ko.computed(function(){var e=[];for(var o in t.iCon)if(t.iCon.hasOwnProperty(o)){var a="block"+o;e.push({cnt:r.calculationSum(r[a](),"cnt"),area:r.calculationSum(r[a](),"area"),cost:r.calculationSum(r[a](),"cost")})}return e}),r.totalSum=ko.computed(function(){var e={cnt:r.calculationSum(r.subtotalSum(),"cnt"),area:r.calculationSum(r.subtotalSum(),"area"),cost:r.calculationSum(r.subtotalSum(),"cost")};return e})}t.ViewModel=r}(jQuery,app),function(e){function t(){this.formatValue=function(e){return e?(e=+e,e.toFixed(2).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")):""},this.calculateProfileLength=function(e,t,r,o,a){return o?(2*(e+t)/1e3+2*(o+a)/1e3)*r:2*(e+t)/1e3*2*r},this.calculateNumberOfCorner=function(e){return 8*e},this.getNumber=function(e){return Math.abs(parseFloat(e,10))},this.K1=1,this.K2=1.12}e.funcBox=t}(app),function(e,t){var r={RectangularDuct:function(e){var r=this;r.productType="RectangularDuct",r.a=t.observable(),r.b=t.observable(),r.l=t.observable(),r.cnt=t.observable(),r.area=t.computed(function(){var e,t=r.getNumber(r.a()),o=r.getNumber(r.b()),a=r.getNumber(r.l()),n=r.getNumber(r.cnt());return t&&o&&a&&n?(e=2*(t+o)*a*n/1e6*r.K1,e.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area()),a=r.getNumber(r.a()),n=r.getNumber(r.b()),u=r.getNumber(r.cnt());return o?(t=o*e.costPerSquareMeter().duct+r.calculateProfileLength(a,n,u)*e.costFlange().costProfile+r.calculateNumberOfCorner(u)*e.costFlange().costCorner,t.toFixed(4)):""})},RoundDuct:function(e){var r=this;r.productType="RoundDuct",r.d=t.observable(),r.l=t.observable(),r.cnt=t.observable(),r.area=t.computed(function(){var e,t=r.getNumber(r.d()),o=r.getNumber(r.l()),a=r.getNumber(r.cnt());return t&&o&&a?(e=Math.PI*t*o*a/1e6*r.K1,e.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area());return o?(t=o*e.costPerSquareMeter().duct,t.toFixed(4)):""})},RectangularBend:function(e){var r=this;r.productType="RectangularBend",r.a=t.observable(),r.b=t.observable(),r.p1=t.observable("100"),r.p2=t.observable("100"),r.angle=t.observable("90"),r.cnt=t.observable(),r.area=t.computed(function(){var e,t,o,a,n,u,c=r.getNumber(r.a()),s=r.getNumber(r.b()),i=r.getNumber(r.p1()),l=r.getNumber(r.p2()),b=r.getNumber(r.angle()),d=r.getNumber(r.cnt());return c&&s&&i&&l&&b&&d?(e=(152*(i+l)+38*Math.PI*c*(b/90))/1e6,t=2*Math.PI/4*c*c*(b/90)/1e6,o=Math.PI/2*s*c*(b/90)/1e6,a=2*(c+s)*i/1e6,n=2*(c+s)*l/1e6,u=(e+t+o+a+n)*d*r.K2,u.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area()),a=r.getNumber(r.a()),n=r.getNumber(r.b()),u=r.getNumber(r.cnt());return o?(t=o*e.costPerSquareMeter().shaped+r.calculateProfileLength(a,n,u)*e.costFlange().costProfile+r.calculateNumberOfCorner(u)*e.costFlange().costCorner,t.toFixed(4)):""})},RoundBend:function(e){var r=this;r.productType="RoundBend",r.d=t.observable(),r.p=t.observable("100"),r.s=t.observable("3"),r.angle=t.observable("90"),r.cnt=t.observable(),r.area=t.computed(function(){var e,t,o=r.getNumber(r.d()),a=r.getNumber(r.p()),n=r.getNumber(r.s()),u=r.getNumber(r.angle()),c=r.getNumber(r.cnt());if(o&&a&&n&&u&&c){switch(n){case 3:e=1.063;break;case 4:e=1.033;break;case 5:e=1.025;break;case 6:e=1;break;default:e=1.1}return t=(2*Math.pow(Math.PI,2)*o*(o/(4*(90/u)))*e+2*a*Math.PI*o)*c/1e6*r.K2,t.toFixed(4)}return""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area()),a=r.getNumber(r.cnt());return o?(t=o*e.costPerSquareMeter().shaped,11.5>t/a?11.5*a:t.toFixed(4)):""})},RectangularTransition:function(e){var r=this;r.productType="RectangularTransition",r.a=t.observable(),r.b=t.observable(),r.c=t.observable(),r.d=t.observable(),r.l=t.observable(),r.cnt=t.observable(),r.area=t.computed(function(){var e,t,o,a,n,u,c=r.getNumber(r.a()),s=r.getNumber(r.b()),i=r.getNumber(r.c()),l=r.getNumber(r.d()),b=r.getNumber(r.l()),d=r.getNumber(r.cnt());return c&&s&&i&&l&&b&&d?(e=152*Math.sqrt(Math.pow(c-i,2)/4+Math.pow(s-l,2)/4+b*b)/1e6,t=2*(c+i)/2*Math.sqrt(Math.pow(b-50,2)+Math.pow(s-l,2)/4)/1e6,o=2*(s+l)/2*Math.sqrt(Math.pow(b-50,2)+Math.pow(c-i,2)/4)/1e6,a=2*(c+s)*25/1e6,n=2*(i+l)*25/1e6,u=(e+t+o+a+n)*d*r.K2,u.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area()),a=r.getNumber(r.a()),n=r.getNumber(r.b()),u=r.getNumber(r.c()),c=r.getNumber(r.d()),s=r.getNumber(r.cnt());return o?(t=o*e.costPerSquareMeter().shaped+r.calculateProfileLength(a,n,s,u,c)*e.costFlange().costProfile+r.calculateNumberOfCorner(s)*e.costFlange().costCorner,t.toFixed(4)):""})},RoundTransition:function(e){var r=this;r.productType="RoundTransition",r.d1=t.observable(),r.d2=t.observable(),r.p1=t.observable("50"),r.p2=t.observable("50"),r.l=t.observable(),r.cnt=t.observable(),r.area=t.computed(function(){var e,t=r.getNumber(r.d1()),o=r.getNumber(r.d2()),a=r.getNumber(r.p1()),n=r.getNumber(r.p2()),u=r.getNumber(r.l()),c=r.getNumber(r.cnt());return t&&o&&a&&n&&u&&c?(e=(((t+o)*Math.PI/2+12+12)*Math.sqrt(Math.pow(u-(a+n),2)+Math.pow((o-t)/2,2))+(t+12+12)*Math.PI*a+(o+12+12)*Math.PI*n)/1e6*c*r.K2,e.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area()),a=r.getNumber(r.cnt()),n=e.radioCost();return o?(t=o*e.costPerSquareMeter().shaped,11.5>t/a?"retail"===n?11.5*a*1.11*1.05:11.5*a*1.11:t.toFixed(4)):""})},RectangularToRoundTransition:function(e){var r=this;r.productType="RectangularToRoundTransition",r.a=t.observable(),r.b=t.observable(),r.d=t.observable(),r.p=t.observable("50"),r.l=t.observable(),r.cnt=t.observable(),r.area=t.computed(function(){var e,t,o,a,n,u,c,s,i,l=r.getNumber(r.a()),b=r.getNumber(r.b()),d=r.getNumber(r.d()),g=r.getNumber(r.p()),m=r.getNumber(r.l()),p=r.getNumber(r.cnt());return l&&b&&d&&g&&m&&p?(d>=0&&400>d?(e=20,t=24):d>=400&&1100>d?(e=40,t=68):(e=40,t=136),o=Math.max(Math.sqrt(Math.pow(b-d,2)/4+Math.pow(m-g-25,2)),Math.sqrt(Math.pow(l-d,2)/4+Math.pow(m-g-25,2))),a=t*o/1e6,n=(Math.PI*d/4+l)*Math.sqrt(Math.pow(b-d,2)/4+Math.pow(m-g-25,2))/1e6,u=(Math.PI*d/4+b)*Math.sqrt(Math.pow(l-d,2)/4+Math.pow(m-g-25,2))/1e6,c=2*(l+b)*25/1e6,s=((Math.PI*d+10)*g+e*Math.PI*d)/1e6,i=1.03*(a+n+u+c+s)*p*r.K2,i.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area()),a=r.getNumber(r.a()),n=r.getNumber(r.b()),u=r.getNumber(r.cnt()),c=e.radioCost();return o?(t=o*e.costPerSquareMeter().shaped+r.calculateProfileLength(a,n,u)/2*e.costFlange().costProfile+r.calculateNumberOfCorner(u)/2*e.costFlange().costCorner,11.5>t/u?"retail"===c?11.5*u*1.11*1.05:11.5*u*1.11:t.toFixed(4)):""})},RectangularTee:function(e){var r=this;r.productType="RectangularTee",r.a=t.observable(),r.b=t.observable(),r.c=t.observable(),r.g=t.observable(),r.l=t.observable(),r.cnt=t.observable(),r.area=t.computed(function(){var e,t,o=r.getNumber(r.a()),a=r.getNumber(r.b()),n=r.getNumber(r.c()),u=r.getNumber(r.g()),c=r.getNumber(r.l()),s=r.getNumber(r.cnt());return o&&a&&n&&u&&c&&s?(e=Math.abs(o-u),t=(2*((o+u)*(100+n/2)+n*(200+e))+a*c+2*a*100+(2*a*100+a*e)+76*(400+e))*s/1e6*r.K2,t.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area()),a=r.getNumber(r.a()),n=r.getNumber(r.b()),u=r.getNumber(r.c()),c=r.getNumber(r.g()),s=r.getNumber(r.cnt());return o?(t=o*e.costPerSquareMeter().shaped+r.calculateProfileLength(a,n,s)*e.costFlange().costProfile/2+r.calculateProfileLength(u,n,s)*e.costFlange().costProfile/2+r.calculateProfileLength(c,n,s)*e.costFlange().costProfile/2+r.calculateNumberOfCorner(s)*e.costFlange().costCorner+r.calculateNumberOfCorner(s)*e.costFlange().costCorner/2,t.toFixed(4)):""})},RoundTee:function(e){var r=this;r.productType="RoundTee",r.d1=t.observable(),r.d2=t.observable(),r.l1=t.observable(),r.l2=t.observable(),r.cnt=t.observable(),r.area=t.computed(function(){var e,t=r.getNumber(r.d1()),o=r.getNumber(r.d2()),a=r.getNumber(r.l1()),n=r.getNumber(r.l2()),u=r.getNumber(r.cnt());return t&&o&&a&&n&&u?(e=((Math.PI*t+34)*a+(Math.PI*o+10)*(n+t/4))*u/1e6*r.K2,e.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area());return o?(t=o*e.costPerSquareMeter().shaped,t.toFixed(4)):""})},RectangularOffset:function(e){var r=this;r.productType="RectangularOffset",r.a=t.observable(),r.b=t.observable(),r.o=t.observable(),r.l=t.observable(),r.cnt=t.observable(),r.area=t.computed(function(){var e,t=r.getNumber(r.a()),o=r.getNumber(r.b()),a=r.getNumber(r.o()),n=r.getNumber(r.l()),u=r.getNumber(r.cnt());return t&&o&&a&&n&&u?(e=.002*(t+o)*(n+a)*.001*u*r.K2,e.toFixed(4)):""}),r.cost=t.computed(function(){var t,o=r.getNumber(r.area()),a=r.getNumber(r.a()),n=r.getNumber(r.b()),u=r.getNumber(r.cnt());return o?(t=o*e.costPerSquareMeter().shaped+r.calculateProfileLength(a,n,u)*e.costFlange().costProfile+r.calculateNumberOfCorner(u)*e.costFlange().costCorner,t.toFixed(4)):""})}};e.iCon=r}(app,ko),function(e){e(function(){e("p.open-all-sections").on({click:function(){var t=[],r=e("div.hidden");r.each(function(r){"block"===e(this).css("display")&&(t[r]=1)}),-1!=e.inArray(1,t)?r.hide():r.show()},mouseenter:function(){e(this).children("i").addClass("icon-hover")},mouseleave:function(){e(this).children("i").removeClass("icon-hover")}}),e("p.open-one-sections").on({click:function(){var t=e(this).closest("div.row").next().find("div.hidden");t.slideToggle(0),t.is(":visible")&&setTimeout(function(){t.find("span#area").each(function(){return""===e(this).text()?(e(this).closest("tr").find("input:first").focus(),!1):void 0})},300)},mouseenter:function(){e(this).children("i").addClass("icon-hover")},mouseleave:function(){e(this).children("i").removeClass("icon-hover")}}),e(".target-setting").on("click",function(){e("#settings").slideToggle(0)}),e(".disableSelection").each(function(){this.onmousedown=this.onselectstart=this.ondoubleclick=function(){return!1},this.unselectable="on",e(this).css({"-moz-user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none"})}),e('input[type="radio"]').focus(function(){this.blur()})})}(jQuery),function(e,t){!function(){for(var t in e.iCon)e.iCon.hasOwnProperty(t)&&e.funcBox.call(e.iCon[t].prototype)}(),t.applyBindings(new e.ViewModel)}(app,ko);